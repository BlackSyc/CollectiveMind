version: '3.4'

services:
  collectivemind.api:
    image: ${DOCKER_REGISTRY-}collectivemind.api
    build:
      context: .
      dockerfile: Source/CollectiveMind.Api/Dockerfile
    ports:
      - "1000:80"
        
  database:
    image: mysql:8.0.21
    environment:
      MYSQL_ROOT_PASSWORD: berehapsate
      MYSQL_DATABASE: identity
    ports:
      - "2003:3306"
        
  smtp4dev:
    image: rnwood/smtp4dev:v3
    restart: always
    ports:
      # Change the number before : to the port the web interface should be accessible on
      - '2004:80'
      # Change the number before : to the port the SMTP server should be accessible on
      - '25:25'
      # Change the number before : to the port the IMAP server should be accessible on
      - '143:143'